import{r,m as x,j as s,s as L,f as A}from"./index-yWr8wzxB.js";import{F as B}from"./FloatingAiChatbot-DdYjnADj.js";function T({user:l,onUpdatePoints:p}){const[i,h]=r.useState(""),[c,u]=r.useState(""),[d,b]=r.useState(""),[o,k]=r.useState(""),[n,f]=r.useState(""),[q,P]=r.useState(""),m=e=>{const t=A(e);p(l.points+t)},j=e=>{alert(`Redirecting to payment for ${e.title} - RM ${e.price}`)},y=e=>{l.points>=e.pointsRequired?(p(l.points-e.pointsRequired),alert(`Module ${e.title} redeemed for ${e.pointsRequired} points!`)):alert(`Insufficient points. You need ${e.pointsRequired} points to redeem this module.`)},v=e=>{alert(`Opening review mode for: ${e.title}`)},N=e=>e.completed?"completed":e.progress>0?"in-progress":"not-started",w=e=>{if(e.completed)return{text:"Completed",icon:"✅",disabled:!0,className:"bg-gray-100 text-gray-400 cursor-not-allowed"};switch(e.type){case"free":return{text:"Start Module",icon:"✅",disabled:!1,className:"bg-green-600 text-white hover:bg-green-700"};case"paid":return{text:`Buy Now - RM ${e.price}`,icon:"💰",disabled:!1,className:"bg-blue-600 text-white hover:bg-blue-700"};case"redeemable":return{text:`Redeem with ${e.pointsRequired} pts`,icon:"🎁",disabled:l.points<e.pointsRequired,className:l.points>=e.pointsRequired?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-300 text-gray-500 cursor-not-allowed"};default:return{text:"Start Module",icon:"✅",disabled:!1,className:"bg-green-600 text-white hover:bg-green-700"}}},S=e=>{if(!e.completed)switch(e.type){case"free":m(e.id);break;case"paid":j(e);break;case"redeemable":y(e);break;default:m(e.id)}},g=r.useMemo(()=>x.filter(e=>{const t=e.title.toLowerCase().includes(i.toLowerCase())||e.description.toLowerCase().includes(i.toLowerCase()),a=!c||e.subject===c,M=!d||e.level===d,R=!o||e.type===o,$=!n||n==="in-progress"&&!e.completed&&e.progress>0||n==="not-started"&&!e.completed&&e.progress===0||n==="completed"&&e.completed;return t&&a&&M&&R&&$}),[i,c,d,o,n]),C=x.filter(e=>e.completed).map(e=>({...e,completedAt:"2025-09-07",pointsEarned:50}));return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"lg:flex lg:gap-8",children:[s.jsxs("div",{className:"lg:flex-1",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Learning Modules"}),s.jsx("input",{type:"text",placeholder:"Search modules...",value:i,onChange:e=>h(e.target.value),className:"w-full mb-4 p-2 border border-gray-300 rounded"}),s.jsxs("div",{className:"flex gap-2 flex-wrap mb-4 text-sm text-gray-700",children:[s.jsxs("select",{value:c,onChange:e=>u(e.target.value),className:"p-2 border border-gray-300 rounded",children:[s.jsx("option",{value:"",children:"All Subjects"}),L.map(e=>s.jsx("option",{value:e,children:e},e))]}),s.jsxs("select",{value:d,onChange:e=>b(e.target.value),className:"p-2 border border-gray-300 rounded",children:[s.jsx("option",{value:"",children:"All Levels"}),s.jsx("option",{value:"Beginner",children:"Beginner"}),s.jsx("option",{value:"Intermediate",children:"Intermediate"}),s.jsx("option",{value:"Advanced",children:"Advanced"})]}),s.jsxs("select",{value:n,onChange:e=>f(e.target.value),className:"p-2 border border-gray-300 rounded",children:[s.jsx("option",{value:"",children:"All Progress"}),s.jsx("option",{value:"not-started",children:"Not Started"}),s.jsx("option",{value:"in-progress",children:"In Progress"}),s.jsx("option",{value:"completed",children:"Completed"})]})]}),s.jsxs("p",{className:"text-gray-600 mb-2",children:["Showing ",g.length," of ",x.length," modules"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:g.map(e=>{const t=w(e),a=N(e);return s.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4 gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:e.title}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-2",children:[s.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full font-medium",children:e.subject}),s.jsx("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded-full",children:e.level})]}),s.jsx("p",{className:"text-sm text-gray-500",children:e.duration})]}),s.jsxs("div",{className:"flex items-center flex-shrink-0",children:[a==="completed"&&s.jsx("span",{className:"inline-flex items-center justify-center rounded-full bg-green-100 px-3 py-1 text-xs font-medium text-green-800 whitespace-nowrap",children:"✅ Completed"}),a==="in-progress"&&s.jsx("span",{className:"inline-flex items-center justify-center rounded-full bg-yellow-100 px-3 py-1 text-xs font-medium text-yellow-800 whitespace-nowrap",children:"🔄 In Progress"}),a==="not-started"&&s.jsx("span",{className:"inline-flex items-center justify-center rounded-full bg-gray-100 px-3 py-1 text-xs font-medium text-gray-800 whitespace-nowrap",children:"⏳ Not Started"})]})]}),s.jsx("p",{className:"text-gray-600 mb-4 line-clamp-3",children:e.description}),!e.completed&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[s.jsx("span",{children:"Progress"}),s.jsxs("span",{children:[e.progress,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${e.progress}%`}})})]}),s.jsxs("div",{className:"mb-4",children:[e.type==="free"&&s.jsxs("div",{className:"inline-flex items-center bg-green-50 text-green-700 px-3 py-1.5 rounded-lg text-sm font-semibold border border-green-200",children:[s.jsx("span",{className:"mr-2",children:"✅"}),"Free Module"]}),s.jsx("p",{className:"text-sm text-yellow-600 font-medium mt-2",children:"⭐ Gain Point: 50 pts"})]}),s.jsxs("button",{onClick:()=>S(e),disabled:t.disabled,className:`w-full rounded-xl px-4 py-3 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ${t.className}`,children:[s.jsx("span",{className:"mr-2",children:t.icon}),t.text]})]},e.id)})})]}),s.jsxs("div",{className:"lg:w-80 lg:border-l lg:border-gray-200 lg:pl-6 mt-8 lg:mt-0",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Completed Modules"}),s.jsx("ul",{className:"space-y-3",children:C.map(e=>s.jsxs("li",{className:"flex flex-col gap-1 p-2 border-b border-gray-100",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-700 font-medium",children:e.title}),s.jsx("span",{className:"text-green-600 font-semibold",children:"✅"})]}),s.jsxs("div",{className:"flex justify-between text-sm text-gray-500",children:[s.jsxs("span",{children:["Earned: ",e.pointsEarned," pts"]}),s.jsxs("span",{children:["Completed: ",e.completedAt]})]}),s.jsx("button",{onClick:()=>v(e),className:"mt-1 text-sm text-blue-600 hover:underline",children:"Review"})]},e.id))})]})]})}),s.jsx(B,{user:l})]})}export{T as default};
