import{r as i,e as m,j as e}from"./index-yWr8wzxB.js";function S({user:v}){const[n,h]=i.useState(""),[x,u]=i.useState("all"),[o,g]=i.useState("all"),r=i.useMemo(()=>m,[]),c=i.useMemo(()=>m.filter(s=>s.status==="completed"),[]),j=i.useMemo(()=>m.filter(s=>s.status==="upcoming"),[]),y=i.useMemo(()=>m.filter(s=>s.status==="cancelled"),[]),p=i.useMemo(()=>{let s=r;if(x!=="all"&&(s=s.filter(t=>t.status===x)),o!=="all"){const t=new Date,a=new Date;switch(o){case"today":s=s.filter(l=>new Date(l.date).toDateString()===t.toDateString());break;case"week":a.setDate(t.getDate()+7),s=s.filter(l=>{const d=new Date(l.date);return d>=t&&d<=a});break;case"month":a.setMonth(t.getMonth()+1),s=s.filter(l=>{const d=new Date(l.date);return d>=t&&d<=a});break;case"past":s=s.filter(l=>new Date(l.date)<t);break}}return n&&(s=s.filter(t=>t.topic.toLowerCase().includes(n.toLowerCase())||t.studentName.toLowerCase().includes(n.toLowerCase())||t.tutorName.toLowerCase().includes(n.toLowerCase())||t.subject.toLowerCase().includes(n.toLowerCase()))),s},[r,x,o,n]),N=c.reduce((s,t)=>s+(t.price||0),0),b=c.length>0?Math.round(c.reduce((s,t)=>s+(t.duration||60),0)/c.length):0,f=s=>{switch(s){case"completed":return"bg-green-100 text-green-800";case"upcoming":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sessions Overview"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"View and manage all tutoring sessions across the platform"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-blue-100 flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-semibold text-xl",children:"ðŸ“š"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Sessions"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r.length})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-green-100 flex items-center justify-center",children:e.jsx("span",{className:"text-green-600 font-semibold text-xl",children:"âœ…"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:c.length})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-yellow-100 flex items-center justify-center",children:e.jsx("span",{className:"text-yellow-600 font-semibold text-xl",children:"â°"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Upcoming"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:j.length})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-purple-100 flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 font-semibold text-xl",children:"ðŸ’°"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Earnings"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["RM ",N]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Session Analytics"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Average Duration:"}),e.jsxs("span",{className:"text-sm font-medium",children:[b," minutes"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Completion Rate:"}),e.jsxs("span",{className:"text-sm font-medium",children:[r.length>0?Math.round(c.length/r.length*100):0,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Cancellation Rate:"}),e.jsxs("span",{className:"text-sm font-medium",children:[r.length>0?Math.round(y.length/r.length*100):0,"%"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Top Subjects"}),e.jsx("div",{className:"space-y-2",children:(()=>{const s={};return c.forEach(a=>{s[a.subject]=(s[a.subject]||0)+1}),Object.entries(s).sort(([,a],[,l])=>l-a).slice(0,3).map(([a,l])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[a,":"]}),e.jsxs("span",{className:"text-sm font-medium",children:[l," sessions"]})]},a))})()})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Recent Activity"}),e.jsx("div",{className:"space-y-2",children:r.slice(0,3).map(s=>e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:s.topic}),e.jsxs("span",{className:"text-gray-500 ml-2",children:[s.studentName," with ",s.tutorName]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.date," at ",s.time]})]},s.id))})]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Sessions"}),e.jsx("input",{id:"search",type:"text",placeholder:"Search by topic, student, tutor, or subject...",value:n,onChange:s=>h(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{id:"status",value:x,onChange:s=>u(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"upcoming",children:"Upcoming"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),e.jsxs("select",{id:"date",value:o,onChange:s=>g(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"Next 7 Days"}),e.jsx("option",{value:"month",children:"Next Month"}),e.jsx("option",{value:"past",children:"Past Sessions"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{h(""),u("all"),g("all")},className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"Clear Filters"})})]})}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["All Sessions (",p.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Session Details"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Participants"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.topic}),s.meetingRoomId&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Room: ",s.meetingRoomId]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:s.studentName}),e.jsxs("div",{className:"text-sm text-gray-500",children:["with ",s.tutorName]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.subject}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:s.date}),e.jsx("div",{className:"text-sm text-gray-500",children:s.time})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[s.duration||60," min"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${f(s.status)}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.price?`RM ${s.price}`:"-"})]},s.id))})]})})]})]})})})}export{S as default};
