import{r as a,a as x,e as S,j as e,i as R}from"./index-C6a6N-4U.js";import{F as z}from"./FloatingAiChatbot-CRoTPVzb.js";function E({user:l}){const[r,w]=a.useState(""),[n,k]=a.useState(""),[C,c]=a.useState(!1),[u,T]=a.useState(null),[o,g]=a.useState(""),[h,b]=a.useState("One-to-one"),[j,p]=a.useState(""),[f,y]=a.useState(""),[d,I]=a.useState(0),m=a.useMemo(()=>x.filter(s=>s.role==="tutor"&&s.status==="approved"),[d]),M=a.useMemo(()=>m.filter(s=>{const i=s.name.toLowerCase().includes(r.toLowerCase())||s.subject.toLowerCase().includes(r.toLowerCase())||s.bio.toLowerCase().includes(r.toLowerCase()),t=!n||s.subject===n;return i&&t}),[m,r,n]),F=[...new Set(m.map(s=>s.subject))],N=a.useMemo(()=>S.filter(s=>s.studentId===l.id&&s.status==="upcoming"),[d,l.id]),v=a.useMemo(()=>S.filter(s=>s.studentId===l.id&&s.status==="completed"),[d,l.id]),L=s=>{T(s),g(""),b("One-to-one"),p(""),c(!0)},A=()=>{const s=x.find(t=>t.id===u);if(!s||!o)return;R({student:l,tutorId:s.id,slotId:o,sessionType:h,remarks:j})&&(c(!1),y("Session booked successfully"),setTimeout(()=>y(""),2500),I(t=>t+1))};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("header",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Find Tutors"}),e.jsx("p",{className:"text-gray-600",children:"Connect with expert tutors for personalized learning sessions."})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Tutors"}),e.jsx("input",{id:"search",type:"text",placeholder:"Search by name, subject, or bio...",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:r,onChange:s=>w(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Subject"}),e.jsxs("select",{id:"subject",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:n,onChange:s=>k(s.target.value),children:[e.jsx("option",{value:"",children:"All Subjects"}),F.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:M.map(s=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("img",{src:s.avatarUrl,alt:`${s.name} avatar`,className:"h-16 w-16 rounded-full ring-1 ring-gray-300"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.subject}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("span",{className:"text-yellow-400",children:"★"}),e.jsx("span",{className:"ml-1 text-sm text-gray-600",children:s.rating}),e.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["• RM ",s.pricePerHour,"/hr"]})]})]})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-600 line-clamp-3",children:s.bio}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:[s.totalSessions," sessions completed"]}),e.jsx("button",{onClick:()=>L(s.id),className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Book Session"})]})]},s.id))}),e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"My Sessions"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Upcoming"}),N.length?e.jsx("ul",{className:"space-y-2",children:N.map(s=>e.jsxs("li",{className:"rounded-md border border-gray-200 p-3",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.topic}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.tutorName," • ",s.subject]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.date," at ",s.time]})]},s.id))}):e.jsx("p",{className:"text-sm text-gray-500",children:"No upcoming sessions"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Past"}),v.length?e.jsx("ul",{className:"space-y-2",children:v.map(s=>e.jsxs("li",{className:"rounded-md border border-gray-200 p-3",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.topic}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.tutorName," • ",s.subject]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.date," at ",s.time]})]},s.id))}):e.jsx("p",{className:"text-sm text-gray-500",children:"No past sessions"})]})]})]}),C&&e.jsxs("div",{className:"fixed inset-0 z-40 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/30","aria-hidden":"true",onClick:()=>c(!1)}),e.jsx("div",{role:"dialog","aria-modal":"true",className:"relative z-50 w-full max-w-lg rounded-2xl bg-white p-6 shadow-xl",children:(()=>{const s=x.find(t=>t.id===u);if(!s)return null;const i=(s.availability||[]).filter(t=>!t.booked);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:s.avatarUrl,alt:`${s.name} avatar`,className:"h-14 w-14 rounded-full ring-1 ring-gray-300"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.subject})]})]}),e.jsx("p",{className:"mt-3 text-sm text-gray-700",children:s.bio}),s.certificateName&&e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Certificate: ",s.certificateName]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Available time slots"}),i.length?e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:i.map(t=>e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"radio",name:"slot",value:t.id,checked:o===t.id,onChange:O=>g(O.target.value),className:"h-4 w-4"}),e.jsxs("span",{children:[t.date," • ",t.start,"-",t.end]})]},t.id))}):e.jsx("p",{className:"text-sm text-gray-500",children:"No available slots"})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Session type"}),e.jsxs("select",{className:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:h,onChange:t=>b(t.target.value),children:[e.jsx("option",{children:"One-to-one"}),e.jsx("option",{children:"Group"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Remarks"}),e.jsx("textarea",{rows:3,className:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Anything your tutor should know...",value:j,onChange:t=>p(t.target.value)})]})]}),e.jsxs("div",{className:"mt-5 flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>c(!1),className:"rounded-md px-4 py-2 text-sm font-semibold text-gray-700 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Cancel"}),e.jsx("button",{onClick:A,disabled:!o,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:"Confirm Booking"})]})]})})()})]}),f&&e.jsx("div",{className:"fixed bottom-5 right-5 z-40 rounded-md bg-green-600 px-4 py-2 text-sm font-semibold text-white shadow-lg",children:f}),e.jsx(z,{user:l})]})}export{E as default};
