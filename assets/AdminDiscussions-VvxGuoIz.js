import{r as d,w as l,x as p,j as e,y as i,a as w}from"./index-yWr8wzxB.js";const U=[{id:"pm_report_1",messageId:"pm_1",reportedBy:"user_8",reportedByUserName:"Alice Chen",reportedUser:"user_9",reportedUserName:"John Smith",reason:"Inappropriate content",timestamp:"2024-01-30T14:00:00Z",messageContent:"Hey, I think you're really hot and we should meet up sometime. I can pay you extra for some private tutoring sessions if you know what I mean ðŸ˜‰",messagePreview:"Hey, I think you're really hot and we should meet up sometime..."},{id:"pm_report_2",messageId:"pm_2",reportedBy:"user_10",reportedByUserName:"Sarah Wilson",reportedUser:"user_11",reportedUserName:"Mike Johnson",reason:"Harassment",timestamp:"2024-01-30T15:30:00Z",messageContent:"You're such a stupid student. I can't believe you don't understand this simple concept. Maybe you should just drop out of school because you're clearly not smart enough.",messagePreview:"You're such a stupid student. I can't believe you don't understand..."},{id:"pm_report_3",messageId:"pm_3",reportedBy:"user_12",reportedByUserName:"Emily Zhang",reportedUser:"user_13",reportedUserName:"David Lee",reason:"Spam",timestamp:"2024-01-30T16:45:00Z",messageContent:"BUY MY COURSE NOW! SPECIAL DISCOUNT! ONLY TODAY! CLICK THIS LINK TO GET 90% OFF! DON'T MISS OUT! LIMITED TIME OFFER! BUY NOW BUY NOW BUY NOW!",messagePreview:"BUY MY COURSE NOW! SPECIAL DISCOUNT! ONLY TODAY! CLICK THIS LINK..."}];function I({user:C}){const[o,y]=d.useState("groups"),[a,g]=d.useState(""),[c,h]=d.useState("all"),b=d.useMemo(()=>{let s=l;return c!=="all"&&(s=s.filter(r=>r.isActive===(c==="active"))),a&&(s=s.filter(r=>r.name.toLowerCase().includes(a.toLowerCase())||r.subject.toLowerCase().includes(a.toLowerCase()))),s},[c,a]),x=d.useMemo(()=>{let s=p.filter(r=>!r.isDeleted);return a&&(s=s.filter(r=>r.content.toLowerCase().includes(a.toLowerCase())||r.userName.toLowerCase().includes(a.toLowerCase()))),s.map(r=>{const t=l.find(n=>n.id===r.groupId);return{...r,groupName:t?t.name:"Unknown Group",groupSubject:t?t.subject:"Unknown Subject"}})},[a,l]),j=d.useMemo(()=>p.filter(s=>s.isReported&&!s.isDeleted),[]),m=d.useMemo(()=>[...j.map(s=>{const r=l.find(t=>t.id===s.groupId);return{...s,type:"discussion",groupName:r?r.name:"Unknown Group",groupSubject:r?r.subject:"Unknown Subject"}}),...U.map(s=>({...s,type:"private"}))],[j,l]),N=s=>{const r=p.find(t=>t.id===s);r&&(r.isDeleted=!0)},u=(s,r)=>{const t=w.find(n=>n.id===s);if(t&&!i.find(n=>n.id===s)){const n={id:s,userName:t.name,mutedUntil:new Date(Date.now()+6048e5).toISOString(),reason:r,mutedBy:"admin"};i.push(n)}},v=s=>{const r=i.findIndex(t=>t.id===s);r>-1&&i.splice(r,1)},f=s=>{const r=l.find(t=>t.id===s);r&&(r.isActive=!r.isActive)};return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Discussion Monitoring"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Monitor and moderate discussion groups and messages"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-blue-100 flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-semibold text-xl",children:"ðŸ’¬"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Discussion Groups"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:l.length})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-green-100 flex items-center justify-center",children:e.jsx("span",{className:"text-green-600 font-semibold text-xl",children:"ðŸ“"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Messages"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:x.length})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-orange-100 flex items-center justify-center",children:e.jsx("span",{className:"text-orange-600 font-semibold text-xl",children:"âš ï¸"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Reported Messages"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:m.length})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-red-100 flex items-center justify-center",children:e.jsx("span",{className:"text-red-600 font-semibold text-xl",children:"ðŸ”‡"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Muted Users"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:i.length})]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-1",children:e.jsx("nav",{className:"flex space-x-1",children:[{id:"groups",name:"Discussion Groups",icon:"ðŸ’¬"},{id:"messages",name:"Discussion Messages",icon:"ðŸ“"},{id:"reported",name:"Reported Content",icon:"âš ï¸"},{id:"muted",name:"Muted Users",icon:"ðŸ”‡"}].map(s=>e.jsxs("button",{onClick:()=>y(s.id),className:`flex-1 flex items-center justify-center px-4 py-2 text-sm font-medium rounded-md transition-colors ${o===s.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"mr-2",children:s.icon}),s.name]},s.id))})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),e.jsx("input",{id:"search",type:"text",placeholder:"Search groups, messages, or users...",value:a,onChange:s=>g(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o==="groups"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"groupFilter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Group Status"}),e.jsxs("select",{id:"groupFilter",value:c,onChange:s=>h(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Groups"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{g(""),h("all")},className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"Clear Filters"})})]})}),o==="groups"&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Discussion Groups (",b.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.name}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${s.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Subject: ",s.subject]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Members: ",s.memberCount]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Created: ",s.createdAt]}),e.jsx("button",{onClick:()=>f(s.id),className:`w-full px-3 py-2 rounded text-sm font-medium transition-colors ${s.isActive?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:s.isActive?"Deactivate":"Activate"})]})]},s.id))})]}),o==="messages"&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Discussion Group Messages (",x.length,")"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Note: Admins can only view discussion group messages, not private messages between users."}),e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:x.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-sm",children:s.userName}),e.jsx("span",{className:`ml-2 text-xs px-2 py-1 rounded ${s.userRole==="tutor"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:s.userRole}),e.jsx("span",{className:"ml-2 text-xs px-2 py-1 rounded bg-gray-100 text-gray-800",children:s.groupName})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>N(s.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Delete"}),e.jsx("button",{onClick:()=>u(s.userId,"Inappropriate content"),className:"text-xs bg-yellow-600 text-white px-2 py-1 rounded hover:bg-yellow-700",children:"Mute User"})]})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:s.content}),e.jsx("div",{className:"bg-gray-50 rounded p-2 mb-2",children:e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("strong",{children:"Group:"})," ",s.groupName," (",s.groupSubject,")"]})}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(s.timestamp).toLocaleString()})]},s.id))})]}),o==="reported"&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Reported Content (",m.length,")"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Full message content from both discussion groups and private messages."}),e.jsx("div",{className:"space-y-4",children:m.map(s=>e.jsxs("div",{className:`rounded-lg p-4 ${s.type==="private"?"bg-purple-50 border border-purple-200":"bg-red-50 border border-red-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-sm",children:s.type==="private"?`${s.reportedUserName} (reported by ${s.reportedByUserName})`:s.userName}),e.jsx("span",{className:`ml-2 text-xs px-2 py-1 rounded ${s.type==="private"?"bg-purple-100 text-purple-800":"bg-red-100 text-red-800"}`,children:s.type==="private"?"Private Message":"Discussion Group"}),s.type==="discussion"&&e.jsx("span",{className:"ml-2 text-xs px-2 py-1 rounded bg-blue-100 text-blue-800",children:s.groupName}),e.jsx("span",{className:`ml-2 text-xs px-2 py-1 rounded ${s.reason==="Inappropriate content"?"bg-red-100 text-red-800":s.reason==="Harassment"?"bg-orange-100 text-orange-800":s.reason==="Spam"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:s.reason})]}),e.jsxs("div",{className:"flex gap-2",children:[s.type==="discussion"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>N(s.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Delete Message"}),e.jsx("button",{onClick:()=>u(s.userId,"Inappropriate content"),className:"text-xs bg-yellow-600 text-white px-2 py-1 rounded hover:bg-yellow-700",children:"Mute User"})]}),s.type==="private"&&e.jsx("button",{onClick:()=>u(s.reportedUser,s.reason),className:"text-xs bg-yellow-600 text-white px-2 py-1 rounded hover:bg-yellow-700",children:"Mute User"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 mb-3 border border-gray-200",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Full Message Content:"}),e.jsxs("p",{className:"text-sm text-gray-800 leading-relaxed",children:['"',s.content||s.messageContent,'"']})]}),s.type==="discussion"&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 mb-3 border border-blue-200",children:[e.jsx("div",{className:"text-xs text-blue-600 mb-1",children:"Group Information:"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Group:"})," ",s.groupName]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Subject:"})," ",s.groupSubject]})]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Reported: ",new Date(s.timestamp).toLocaleString(),s.type==="private"&&e.jsxs("span",{className:"ml-4",children:["Reported by: ",s.reportedByUserName]})]})]},s.id))})]}),o==="muted"&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Muted Users (",i.length,")"]}),e.jsx("div",{className:"space-y-4",children:i.map(s=>e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-sm",children:s.userName}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",s.reason,")"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["Until: ",new Date(s.mutedUntil).toLocaleDateString()]}),e.jsx("button",{onClick:()=>v(s.id),className:"text-xs bg-green-600 text-white px-2 py-1 rounded hover:bg-green-700",children:"Unmute"})]})]})},s.id))})]})]})})})}export{I as default};
